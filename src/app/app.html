<main class="w-ful h-full p-10 flex justify-center">
  <form  (ngSubmit)="onSubmit()" class="max-w-7xl w-full flex flex-col gap-3">
      <label for="name" class=" flex flex-col gap-3">
        Name
        <input id="name" type="text" placeholder="name" class="col-span-2 border border-gray-300 p-2" 
          [class.border-red-500]="enterpriseForm.name().dirty() && enterpriseForm.name().invalid()"
          [field]="enterpriseForm.name" />
      </label>
   
    <ng-container>
      @for (employeeForm of enterpriseForm.employees; let index = $index; track index) {
        <form class="grid grid-cols-2 border border-gray-200 p-5 gap-3 relative">
          <label [for]="'name' + index" class="flex flex-col gap-3">
            Name
            <input [id]="'name' + index" type="text" placeholder="name" class="col-span-2 border border-gray-300 p-2" 
              [field]="employeeForm.name"
              [class.border-red-500]="employeeForm.name().dirty() && employeeForm.name().invalid()" />
          </label>
          
          <label [for]="'age' + index" class="flex flex-col gap-3">
            Age
            <input [id]="'age' + index" type="number" placeholder="name" class="col-span-2 border border-gray-300 p-2" 
              [field]="employeeForm.age"
              [class.border-red-500]="employeeForm.age().dirty() && employeeForm.age().invalid()" />
          </label>

          <label [for]="'email' + index" class="flex flex-col gap-3 col-span-2">
            Email
            <input [id]="'email' + index" type="email" placeholder="name" class="col-span-2 border border-gray-300 p-2" 
              [field]="employeeForm.email"
              [class.border-red-500]="employeeForm.email().dirty() && employeeForm.email().invalid()" />
          </label>
          <button class="p-2 border border-gray-200 absolute top-1 right-1" type="button" (click)="onDeleteEmployee(index)" >
            <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-trash-icon lucide-trash"><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6"/><path d="M3 6h18"/><path d="M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"/></svg>
          </button>
        </form>
      }
    </ng-container>

    <div class="flex justify-center items-center">
      <button type="button" class="p-2 bg-gray-300 cursor-pointer" (click)="addEmployee()">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="lucide lucide-plus-icon lucide-plus"><path d="M5 12h14"/><path d="M12 5v14"/></svg>
      </button>
    </div>

    <div class="flex justify-end">
      <button type="button" class="bg-black text-white font-semibold px-4 py-2 cursor-pointer disabled:cursor-not-allowed disabled:bg-gray-700" [disabled]="enterpriseForm().invalid()">
        Save
      </button>
    </div>

  </form>
</main>